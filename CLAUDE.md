# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Hexalith (HexLogoGen) is a modern geometric logo generator written in Rust. It creates unique hexagonal designs with minimal configuration, inspired by the Mesos Framework Logo Generator style. The tool generates random, geometric logos based on triangles within a hexagonal grid.

## Architecture

This project follows a modular architecture with the following components:

1. **CLI Module**: Handles user input, argument parsing using Clap, and help documentation
2. **Generator Module**: Core logic for creating logos
   - Hexagon/Grid Generator: Creates the base grid
   - Shape Generator: Creates random polygon shapes
   - Color Manager: Handles color selection and blending
3. **SVG Module**: Converts generated shapes to SVG format
4. **PNG Module**: Converts SVG to PNG when needed
5. **Utilities Module**: Helper functions, random number generation, etc.
6. **Library API**: Public API for integration with other Rust projects

## Development Environment

This project uses Nix Flakes for development environment management. Always run Rust commands through the Nix environment:

```bash
# Instead of direct cargo commands, use:
nix develop -c cargo build
nix develop -c cargo test
nix develop -c cargo run

# Or enter the development shell with:
nix develop
# Then you can run cargo commands directly
```

If you have direnv installed and enabled, the Nix environment will be automatically activated when you enter the directory, and you can use cargo commands directly.

## Development Commands

```bash
# Build the project
nix develop -c cargo build

# Run the project
nix develop -c cargo run

# Run tests
nix develop -c cargo test

# Run specific test
nix develop -c cargo test <test_name>

# Build for release
nix develop -c cargo build --release

# Check for compilation errors without building
nix develop -c cargo check

# Format code
nix develop -c cargo fmt

# Run linter
nix develop -c cargo clippy
```

## CLI Interface

The command-line interface includes these options:

```
USAGE:
    hexlogogen [OPTIONS] [OUTPUT]

ARGS:
    <output>    Output file path [default: logo.svg]

OPTIONS:
    -s, --seed <SEED>             Seed for deterministic generation
    -u, --uuid <UUID>             UUID for deterministic generation (overrides seed)
    -c, --colors <COLORS>         Color scheme [default: default]
    -n, --shapes <NUM>            Number of shapes to generate [default: 3]
    -g, --grid-size <SIZE>        Grid density (3-8) [default: 6]
    -o, --opacity <OPACITY>       Shape opacity [default: 0.8]
    -w, --width <WIDTH>           Output width in pixels (PNG only)
    -h, --height <HEIGHT>         Output height in pixels (PNG only)
    -f, --format <FORMAT>         Output format: svg or png [default: svg]
    -v, --verbose                 Enable verbose output
        --help                    Print help information
        --version                 Print version information
```

## Dependencies

The project relies on these Rust crates:

- **Clap**: Command-line argument parsing
- **uuid**: UUID generation and handling
- **rand** and **rand_chacha**: Random number generation
- **svg**: SVG string generation
- **tiny-skia** and **resvg/usvg**: For PNG output

## Technical Implementation Notes

- The hexagonal grid is divided into triangular cells
- For grid density `n`, the hexagon is divided into `6nÂ²` triangular cells
- Grid density values range from 3 to 8 (default: 6)
- Logos are generated by creating multiple overlapping shapes made of connected triangular cells
- Shapes can have different colors with configurable opacity
- The tool supports both random and deterministic (seeded) generation

## Code Standards

- Follow idiomatic Rust practices
- Use meaningful variable and function names
- Write unit tests for core functionality
- Implement proper error handling with the Result type
- Add documentation comments for public APIs
- Keep the code clean, modular and maintainable